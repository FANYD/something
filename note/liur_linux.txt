
查找目录下的所有文件中是否含有某个字符串
find .|xargs grep -ri "IBM"

查找目录下的所有文件中是否含有某个字符串,并且只打印出文件名
find .|xargs grep -ri "IBM" -l

查找指定目录下指定文件名
find /etc -name '*srm*'
查找文件
find /usr/local/hadoop -name '*had*' -type d

解压缩包
tar -xzvf scala-2.10.4.tgz


改变目录使用权限(后面的是文件夹名)
chown -R aijiabao:aijiabao spark

chmod -R 777 aaa

改名
mv hadoop-2.7.0 hadoop


查找文件
find / -name httpd.conf
etc目录下查找文件名包含"srm"的
find /etc -name '*srm*'





一、查看哪些端口被打开 netstat -anp
二、关闭端口号:	iptables -A INPUT -p tcp --drop 端口号 -j DROP
　　		iptables -A OUTPUT -p tcp --dport 端口号 -j DROP
三、打开端口号:	iptables -A INPUT -ptcp --dport 端口号 -j ACCEPT
四、以下是linux打开端口命令的使用方法。
　　nc -lp 23 &(打开23端口，即telnet)
　　netstat -an | grep 23 (查看是否打开23端口)
五、linux打开端口命令每一个打开的端口，都需要有相应的监听程序才可以


service iptables status可以查看到iptables服务的当前状态。
但是即使服务运行了,防火墙也不一定起作用,你还得看防火墙规则的设置 iptables -L
在此说一下关于启动和关闭防火墙的命令:
1) 重启后生效
开启： chkconfig iptables on
关闭： chkconfig iptables off
2) 即时生效，重启后失效
开启： service iptables start
关闭： service iptables stop


远程拷贝文件(文件夹的内容全部拷过去)
scp -r /usr/local/hadoop/etc/hadoop hadoop@172.21.1.204:/usr/local/hadoop/etc/

scp -r /gpdata/risk/spark-1.6.0-bin-hadoop2.6.tgz hadoop@172.23.6.2:/gpdata/risk

scp -r /gpdata/risk/hadoop hadoop@172.23.6.3:/gpdata/risk



查看centos版本
cat /proc/version



//查看剩余空间
df -hl
显示格式为：
文件系统 容量 已用 可用 已用% 挂载点



SSH免密码登录，因为Hadoop需要通过SSH登录到各个节点进行操作，我用的是root用户，每台服务器都生成公钥，再合并到authorized_keys
(1)CentOS默认没有启动ssh无密登录，去掉/etc/ssh/sshd_config其中2行的注释，每台服务器都要设置，
#RSAAuthentication yes
#PubkeyAuthentication yes
(2)输入命令，ssh-keygen -t rsa，生成key，都不输入密码，一直回车，/root就会生成.ssh文件夹，每台服务器都要设置，
(3)合并公钥到authorized_keys文件，在Master服务器，进入/root/.ssh目录，通过SSH命令合并，
cat id_rsa.pub>> authorized_keys
ssh root@192.168.0.183 cat ~/.ssh/id_rsa.pub>> authorized_keys
ssh root@192.168.0.184 cat ~/.ssh/id_rsa.pub>> authorized_keys
(4)把Master服务器的authorized_keys、known_hosts复制到Slave服务器的/root/.ssh目录
(5)完成，ssh root@192.168.0.183、ssh root@192.168.0.184就不需要输入密码了


配置/etc/hosts文件


一：查看cpu
more /proc/cpuinfo | grep "model name"
grep "model name" /proc/cpuinfo
如果觉得需要看的更加舒服
grep "model name" /proc/cpuinfo | cut -f2 -d:

二：查看内存
grep MemTotal /proc/meminfo
grep MemTotal /proc/meminfo | cut -f2 -d:
free -m |grep "Mem" | awk '{print $2}'


zip 压缩方法：
压缩当前的文件夹 zip -r ./xahot.zip ./* -r表示递归
zip [参数] [打包后的文件名] [打包的目录路径]
解压 unzip xahot.zip 不解释



抓包
tcpdump host 172.21.1.11
tcpdump port 7077


查看操作历史
gpadmin用户
HISTFILE=/home/gpadmin/.bash_history
root用户
/root/.bash_history


--替换文件中的字符串
perl -p -i -e "s/memory_production/memory_production2/g" ./*.sql
上面的意思是将当前目录下所有的sql文件中的“memory_production”替换成“memory_production2”

perl -p -i -e "s/\n//g" ./*.done

查看文件夹大小(深度为1)
du -h --max-depth=1


如果你还需要对查找结果按照文件大小做一个排序，那么可以使用下面命令
find . -type f -size +50M  -print0 | xargs -0 du -h | sort -nr



更改主机名
hostname
vi /etc/sysconfig/network
vi /etc/hosts



服务器之间取本地文件
rz  上传本地文件
sz  下载文件到地



直接下载包
wget http://125.39.35.134/files/20670000082F10B6/download.redis.io/releases/redis-3.2.0.tar.gz


设置防火墙端口
iptables -I INPUT -p tcp --dport 8088 -j ACCEPT
/etc/rc.d/init.d/iptables save
service iptables restart



查看系统端口限制
service iptables status
增加端口
/etc/sysconfig/iptables   文件
service iptables restart //重启防火墙后生效

# Generated by iptables-save v1.4.7 on Wed Sep 14 16:43:14 2016
*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [118:7516]
-A INPUT -p tcp -m tcp --dport 8082 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 8084 -j ACCEPT
-A INPUT -s 192.168.1.0/24 -p tcp -m tcp --dport 6379 -j ACCEPT
-A INPUT -s 192.168.1.0/24 -p tcp -m tcp --dport 7000 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 8080 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 8086 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 8089 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 12000 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 20880 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 20881 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 20882 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 20883 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 8002 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 8012 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 8801 -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 21 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A INPUT -p tcp -m state --state NEW -m tcp --dport 1024:65535 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 40000:40080 -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A FORWARD -j REJECT --reject-with icmp-host-prohibited
-A OUTPUT -d 192.168.1.1/32 -p udp -m udp --dport 53 -j ACCEPT
-A OUTPUT -d 202.106.0.20/32 -p udp -m udp --dport 53 -j ACCEPT
-A OUTPUT -d 183.62.242.163/32 -p udp -m udp --dport 53 -j ACCEPT
-A OUTPUT -p udp -j DROP
-A OUTPUT -p tcp -m tcp --sport 20 -j ACCEPT
COMMIT
# Completed on Wed Sep 14 16:43:14 2016
